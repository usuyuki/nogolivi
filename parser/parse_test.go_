package integration

import (
	"testing"

	"github.com/nogolivi/nogolivi/parser"
)

func TestParse(t *testing.T) {
	traceString := `
  goroutine 1 [running]:
github.com/usuyuki/nogolivi/getter.GetTrace()
        /home/naofumi/source_code/nogolivi/getter/getTrace.go:15 +0x3c
github.com/usuyuki/nogolivi.Trace()
        /home/naofumi/source_code/nogolivi/nogolivi.go:40 +0x213

main.main()
        /home/naofumi/source_code/nogolivi/examples/go_living.go:26 +0x14f

goroutine 18 [sleep]:
time.Sleep(0x3b9aca00)
        /home/naofumi/.asdf/installs/golang/1.21rc2/go/src/runtime/time.go:195 +0x125

main.main.func1(0x1)
        /home/naofumi/source_code/nogolivi/examples/go_living.go:19 +0x26
created by main.main in goroutine 1
        /home/naofumi/source_code/nogolivi/examples/go_living.go:18 +0x59

goroutine 19 [sleep]:
time.Sleep(0x3b9aca00)
        /home/naofumi/.asdf/installs/golang/1.21rc2/go/src/runtime/time.go:195 +0x125
main.main.func1(0x2)
        /home/naofumi/source_code/nogolivi/examples/go_living.go:19 +0x26
created by main.main in goroutine 1
        /home/naofumi/source_code/nogolivi/examples/go_living.go:18 +0x59

goroutine 20 [sleep]:
time.Sleep(0x3b9aca00)
        /home/naofumi/.asdf/installs/golang/1.21rc2/go/src/runtime/time.go:195 +0x125
main.main.func1(0x3)
        /home/naofumi/source_code/nogolivi/examples/go_living.go:19 +0x26
created by main.main in goroutine 1
        /home/naofumi/source_code/nogolivi/examples/go_living.go:18 +0x59

goroutine 21 [sleep]:
time.Sleep(0x3b9aca00)
        /home/naofumi/.asdf/installs/golang/1.21rc2/go/src/runtime/time.go:195 +0x125
main.main.func1(0x4)

        /home/naofumi/source_code/nogolivi/examples/go_living.go:19 +0x26
created by main.main in goroutine 1
        /home/naofumi/source_code/nogolivi/examples/go_living.go:18 +0x59

goroutine 22 [sleep]:
time.Sleep(0x3b9aca00)
        /home/naofumi/.asdf/installs/golang/1.21rc2/go/src/runtime/time.go:195 +0x125
main.main.func1(0x5)
        /home/naofumi/source_code/nogolivi/examples/go_living.go:19 +0x26
created by main.main in goroutine 1
        /home/naofumi/source_code/nogolivi/examples/go_living.go:18 +0x59

goroutine 23 [sleep]:
time.Sleep(0x3b9aca00)
        /home/naofumi/.asdf/installs/golang/1.21rc2/go/src/runtime/time.go:195 +0x125
main.main.func1(0x6)
        /home/naofumi/`
	parser.Parse(traceString)
}
